{"version":3,"sources":["components/order/index.js","pages/Account/index.js","components/error/index.js","utils/formatPrice.js"],"names":["Order","isLoggedIn","useGlobalContext","useState","orders","setOrders","isLoading","setIsLoading","useEffect","axios","get","then","res","data","className","length","map","o","orderId","formatPrice","amount","order","item","index","to","itemId","src","img","alt","name","price","pqty","Account","useAddressContext","address","setAddress","saveAddress","error","setError","editMode","setEditMode","loadingError","stateRef","useRef","cityRef","pinRef","contactRef","addressLineRef","showForm","setShowForm","handleChange","e","addressLine","state","city","contact","pin","target","value","resetError","exists","email","htmlFor","ref","onFocus","type","defaultValue","placeholder","onClick","current","onChange","preventDefault","Error","number","Intl","NumberFormat","style","currency","format","replace"],"mappings":"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","file":"static/js/7.9187f061.chunk.js","sourcesContent":["import React,{useEffect,useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useGlobalContext } from '../../context';\r\nimport './order.css';\r\nimport { Link } from 'react-router-dom';\r\nimport {formatPrice} from '../../utils/formatPrice';\r\n\r\nconst Order = () => {\r\n    const {isLoggedIn} = useGlobalContext();\r\n    const [orders,setOrders] = useState([]);\r\n    const [isLoading,setIsLoading] = useState(true);\r\n    useEffect(()=>{\r\n        setIsLoading(true);\r\n        if(isLoggedIn){\r\n            axios.get('/user/orders')\r\n                .then(res =>{\r\n                    if(res.data.orders){\r\n                        setOrders(res.data.orders);\r\n                        setIsLoading(false);\r\n                    }\r\n                })\r\n        }\r\n    },[isLoggedIn]);\r\n\r\n    if(isLoading){\r\n        return (\r\n            <div className=\"order__loader\">\r\n                <div className=\"loader__spinner\"></div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if(!orders.length){\r\n        return <p className=\"no__orders center\">All your orders will be displayed here</p>\r\n    }\r\n\r\n    return (\r\n        <div className=\"orders\">\r\n            {orders.map(o =>{\r\n                return <div key={o.orderId} className=\"single__order\">\r\n                    <h1> <span>order id :</span> {o.orderId}</h1>\r\n                    <h1> <span>total : </span> {formatPrice(o.amount)}</h1>\r\n                    {o.order.map((item,index) => {\r\n                        return(\r\n                            <div key={index}className=\"order__item\">\r\n                                <Link to={`/shop/${item.itemId}`}><img src={`https://sbcoffeecompany.herokuapp.com/${item.img}`} alt=\"\"/></Link>\r\n                                <span>{item.name}</span>\r\n                                <span>{formatPrice(item.price)}</span>\r\n                                <span>{item.pqty}</span>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Order\r\n","import React,{useState,useEffect,useRef} from 'react';\r\nimport { useAddressContext } from '../../addressContext';\r\nimport { useGlobalContext } from '../../context';\r\nimport './account.css';\r\nimport Order from '../../components/order';\r\nimport Loader from '../../components/loader';\r\nimport Error from '../../components/error';\r\nimport Footer from '../../components/footer';\r\nconst Account = () => {\r\n    const {address,setAddress,saveAddress,error,setError,editMode,setEditMode,isLoading,loadingError} = useAddressContext();\r\n    const {isLoggedIn} = useGlobalContext();\r\n    const stateRef = useRef(null);\r\n    const cityRef = useRef(null);\r\n    const pinRef = useRef(null);\r\n    const contactRef = useRef(null);\r\n    const addressLineRef = useRef(null);\r\n    const [showForm,setShowForm] = useState(false)\r\n\r\n    const handleChange = (e) =>{\r\n        setError(error => {return ({...error,addressLine:'',state:'',city:'',contact:'',pin:''})});\r\n        setAddress({...address,[e.target.name]:e.target.value});\r\n    }\r\n    \r\n    const resetError = () =>{\r\n        setError(error => {return ({...error,addressLine:'',state:'',city:'',contact:'',pin:''})});\r\n    }\r\n\r\n\r\n    const saveChanges = () =>{\r\n        setError(error => {return ({...error,addressLine:'',state:'',city:'',contact:'',pin:''})});\r\n        saveAddress({\r\n            addressLine:addressLineRef.current.value,\r\n            state: stateRef.current.value,\r\n            city: cityRef.current.value,\r\n            pin: pinRef.current.value,\r\n            contact: contactRef.current.value,\r\n        });\r\n    }\r\n\r\n    if(!isLoggedIn){\r\n        return <div className=\"account__notLogged\">\r\n            You must log in first\r\n        </div>\r\n    }\r\n\r\n    if(isLoading){\r\n        return <Loader/>\r\n    }\r\n    \r\n    if(loadingError){\r\n        return <Error/>\r\n    }\r\n\r\n\r\n\r\n    if(!address.exists){\r\n        return <div className=\"address__save\">\r\n            <div className=\"address__center center\">\r\n                <div className=\"address__header\">\r\n                    {address.email && <p> {address.email}</p>}\r\n                </div>\r\n                {!showForm?\r\n                    <div className=\"save__address__prompt\">\r\n                        <span>you have no saved addresses</span>\r\n                        <button className=\"btn__general\" onClick={()=>setShowForm(true)}>add address</button>\r\n                    </div>\r\n                :null}\r\n                {showForm?\r\n                <>   \r\n                    <form className=\"address__form\"> \r\n                        <input type=\"text\" value={address.addressLine} onChange={handleChange} name=\"addressLine\" placeholder=\"street address\"/>\r\n                        <div className=\"address__input__error\">{error.addressLine}</div>\r\n                        <div className=\"address__form__row\">\r\n                            <div>\r\n                                <input value={address.state} onChange={handleChange} name=\"state\" type=\"text\" placeholder=\"state\"/>\r\n                                <div className=\"address__input__error\">{error.state}</div>\r\n                            </div>\r\n                            <div>\r\n                                <input value={address.city} onChange={handleChange} name=\"city\" type=\"text\" placeholder=\"city\"/>\r\n                                <div className=\"address__input__error\">{error.city}</div>\r\n                            </div>\r\n                        </div>\r\n                        <input value={address.pin} onChange={handleChange} name=\"pin\" type=\"number\" placeholder=\"pin\"/>\r\n                        <div className=\"address__input__error\">{error.pin}</div>\r\n                        <input value={address.contact} onChange={handleChange} name=\"contact\" type=\"number\" placeholder=\"contact\"/>\r\n                        <div className=\"address__input__error\">{error.contact}</div>\r\n                        <div className=\"btn-wrapper\">\r\n                            <span className=\"btn__general\" onClick={(e)=>{e.preventDefault();saveAddress(address)}}>save address</span>\r\n                        </div>\r\n                    </form>\r\n                </>\r\n                :null}\r\n                <h1 className=\"order__head\">previous orders</h1>\r\n                <Order/>\r\n            </div>\r\n            <Footer/>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <div className=\"account\">\r\n            <div className=\"address__center center\">\r\n                <div className=\"address__header\">\r\n                    {address.email && <p> {address.email}</p>}\r\n                </div>\r\n\r\n                <div className=\"address__details\">\r\n                    {!editMode?\r\n                        <div className=\"account__address__text\">\r\n                            <div>\r\n                                <div className=\"address__text__head\">street line: </div>\r\n                                <div className=\"address__text__desc\">{address.addressLine}</div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"address__text__head\">state: </div>\r\n                                <div className=\"address__text__desc\">{address.state}</div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"address__text__head\">city: </div>\r\n                                <div className=\"address__text__desc\">{address.city}</div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"address__text__head\">pin: </div>\r\n                                <div className=\"address__text__desc\">{address.pin}</div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"address__text__head\">contact: </div>\r\n                                <div className=\"address__text__desc\">{address.contact}</div>\r\n                            </div>\r\n                        </div>\r\n                    : <div className=\"account__address__edit\">\r\n                        <form> \r\n                            <div>\r\n                                <label className=\"address__text__head\" htmlFor=\"addressLine\">street line: </label>\r\n                                <input className=\"address__input\" ref={addressLineRef} onFocus={resetError} type=\"text\" defaultValue={address.addressLine} name=\"addressLine\" placeholder=\"street address\"/>\r\n                                <div className=\"address__input__error\">{error.addressLine}</div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"address__text__head\" htmlFor=\"state\">state: </label>\r\n                                <input ref={stateRef} onFocus={resetError}defaultValue={address.state} name=\"state\" type=\"text\" placeholder=\"state\"/>\r\n                                <div className=\"address__input__error\">{error.state}</div>\r\n\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"address__text__head\" htmlFor=\"city\">city: </label>\r\n                                <input ref={cityRef} onFocus={resetError} defaultValue={address.city} name=\"city\" type=\"text\" placeholder=\"city\"/>\r\n                                <div className=\"address__input__error\">{error.city}</div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"address__text__head\" htmlFor=\"pin\">pin: </label>\r\n                                <input ref={pinRef} onFocus={resetError} defaultValue={address.pin} name=\"pin\" type=\"number\" placeholder=\"pin\"/>\r\n                                <div className=\"address__input__error\">{error.pin}</div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"address__text__head\" htmlFor=\"contact\">contact: </label>\r\n                                <input ref={contactRef} onFocus={resetError} defaultValue={address.contact} name=\"contact\" type=\"number\" placeholder=\"contact\"/>\r\n                                <div className=\"address__input__error\">{error.contact}</div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    }\r\n                    <div>\r\n                        {editMode?\r\n                            <div className=\"edit__address__wrapper\">\r\n                                <button className=\"cancel__edit__btn btn__general\" onClick={()=>setEditMode(false)}>cancel</button>\r\n                                <button className=\"save__edit__btn btn__general\" onClick={saveChanges}>save</button>\r\n                            </div>\r\n                        : <div className=\"edit__address__wrapper\"><button className=\"edit__address__btn btn__general\" onClick={()=>setEditMode(true)}>edit</button></div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <h1 className=\"order__head\">previous orders</h1>\r\n                <Order/>\r\n            </div>\r\n            <Footer/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Account;\r\n","import React from 'react';\r\nimport './error.css';\r\n\r\nconst Error = () => {\r\n    return (\r\n        <div className=\"fetch__error\">\r\n            <h1>an error occurred</h1>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Error\r\n","export const formatPrice = (number) =>{\r\n    const newNumber = Intl.NumberFormat('en-IN',{\r\n        style: 'currency',\r\n        currency: 'INR'\r\n    }).format(number/100).replace(/\\.00$/,'');\r\n    return newNumber;\r\n}"],"sourceRoot":""}